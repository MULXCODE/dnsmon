<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>dnsmon-loader.js - DNSMON</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="DNSMON"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 14.4.25.2</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/AggregationLevelConnector.html">AggregationLevelConnector</a></li>
            
                <li><a href="../classes/AntiFloodConnector.html">AntiFloodConnector</a></li>
            
                <li><a href="../classes/BreadcrumbsView.html">BreadcrumbsView</a></li>
            
                <li><a href="../classes/CacheConnectorAtlas.html">CacheConnectorAtlas</a></li>
            
                <li><a href="../classes/Cell.html">Cell</a></li>
            
                <li><a href="../classes/Connector.html">Connector</a></li>
            
                <li><a href="../classes/ConnectorFacade.html">ConnectorFacade</a></li>
            
                <li><a href="../classes/ControlPanelView.html">ControlPanelView</a></li>
            
                <li><a href="../classes/ErrorsHandlerConnectorAtlas.html">ErrorsHandlerConnectorAtlas</a></li>
            
                <li><a href="../classes/FullScreenView.html">FullScreenView</a></li>
            
                <li><a href="../classes/GesturesManager.html">GesturesManager</a></li>
            
                <li><a href="../classes/HistoryManager.html">HistoryManager</a></li>
            
                <li><a href="../classes/IsolationLevelConnectorAtlas.html">IsolationLevelConnectorAtlas</a></li>
            
                <li><a href="../classes/MainView.html">MainView</a></li>
            
                <li><a href="../classes/ParamsManager.html">ParamsManager</a></li>
            
                <li><a href="../classes/PopUpView.html">PopUpView</a></li>
            
                <li><a href="../classes/Row.html">Row</a></li>
            
                <li><a href="../classes/SessionManager.html">SessionManager</a></li>
            
                <li><a href="../classes/SvgChartView.html">SvgChartView</a></li>
            
                <li><a href="../classes/SvgContainerView.html">SvgContainerView</a></li>
            
                <li><a href="../classes/SvgOrdinalAxisView.html">SvgOrdinalAxisView</a></li>
            
                <li><a href="../classes/SvgTimeAxisView.html">SvgTimeAxisView</a></li>
            
                <li><a href="../classes/TemplateManagerView.html">TemplateManagerView</a></li>
            
                <li><a href="../classes/TimeController.html">TimeController</a></li>
            
                <li><a href="../classes/TimeOverviewView.html">TimeOverviewView</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/connector.html">connector</a></li>
            
                <li><a href="../modules/connector.Atlas.html">connector.Atlas</a></li>
            
                <li><a href="../modules/controller.html">controller</a></li>
            
                <li><a href="../modules/environment.html">environment</a></li>
            
                <li><a href="../modules/model.html">model</a></li>
            
                <li><a href="../modules/session.html">session</a></li>
            
                <li><a href="../modules/view.html">view</a></li>
            
                <li><a href="../modules/view.svg.html">view.svg</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: dnsmon-loader.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * Created with JetBrains WebStorm.
 * User: mcandela
 * Date: 9/20/13
 * Time: 11:01 AM
 * To change this template use File | Settings | File Templates.
 */


/**
 * Some require.js configurations
 */

requirejs.config({
    paths:{
        /* environment */
        &quot;env&quot;: DNSMON_ENVIRONMENT_URL + &quot;environment&quot;,
        &quot;env.utils&quot;: DNSMON_ENVIRONMENT_URL + &quot;utils&quot;,
        &quot;env.config&quot;: DNSMON_ENVIRONMENT_URL + &quot;config&quot;,
        &quot;env.params-manager&quot;: DNSMON_ENVIRONMENT_URL + &quot;ParamsManager&quot;,
        &quot;env.history-manager&quot;: DNSMON_ENVIRONMENT_URL + &quot;HistoryManager&quot;,

        &quot;env.languages.en&quot;: DNSMON_ENVIRONMENT_URL + &quot;languages/lang-en&quot;,

        /* libs */
        &quot;lib.d3&quot;: DNSMON_LIB_URL + &quot;d3.v3.amd&quot;,
        &quot;lib.jquery&quot;: DNSMON_LIB_URL + &quot;jquery.min&quot;,

        &quot;lib.jquery-ui&quot;: DNSMON_LIB_URL + &quot;jquery-ui.min&quot;,
        &quot;lib.jquery-ui.timepicker&quot;: DNSMON_LIB_URL + &quot;jquery-ui.timepicker&quot;,

        &quot;lib.jquery.cookie&quot;: DNSMON_LIB_URL + &quot;jquery.cookie&quot;,
        &quot;lib.date-format&quot;: DNSMON_LIB_URL + &quot;dateFormat&quot;,
        &quot;lib.atlas-traceroute-printer&quot;: DNSMON_LIB_URL + &quot;atlas.traceroute&quot;,


        /* model */
        &quot;model.cell&quot;: DNSMON_MODEL_URL + &quot;Cell&quot;,
        &quot;model.row&quot;: DNSMON_MODEL_URL + &quot;Row&quot;,


        /* view */
        &quot;view.main&quot;: DNSMON_VIEW_URL + &quot;MainView&quot;,
        &quot;view.control-panel&quot;: DNSMON_VIEW_URL + &quot;ControlPanelView&quot;,
        &quot;view.full-screen&quot;: DNSMON_VIEW_URL + &quot;FullScreenView&quot;,
        &quot;view.breadcrumbs&quot;: DNSMON_VIEW_URL + &quot;BreadcrumbsView&quot;,
        &quot;view.ordinal-axis&quot;: DNSMON_VIEW_URL + &quot;OrdinalAxisView&quot;,
        &quot;view.pop-up&quot;: DNSMON_VIEW_URL + &quot;PopUpView&quot;,
        &quot;view.template-manager&quot;: DNSMON_VIEW_URL + &quot;TemplateManagerView&quot;,
        &quot;view.time-axis&quot;: DNSMON_VIEW_URL + &quot;TimeAxisView&quot;,
        &quot;view.time-overview&quot;: DNSMON_VIEW_URL + &quot;TimeOverviewView&quot;,


        /* view.svg */
        &quot;view.svg.chart&quot;: DNSMON_VIEW_URL + &quot;svg/SvgChartView&quot;,
        &quot;view.svg.container&quot;: DNSMON_VIEW_URL + &quot;svg/SvgContainerView&quot;,
        &quot;view.svg.time-axis&quot;: DNSMON_VIEW_URL + &quot;svg/SvgTimeAxisView&quot;,
        &quot;view.svg.ordinal-axis&quot;: DNSMON_VIEW_URL + &quot;svg/SvgOrdinalAxisView&quot;,


        /* controller */
        &quot;controller.gesture-manager&quot;: DNSMON_CONTROLLER_URL + &quot;GesturesManager&quot;,
        &quot;controller.time&quot;: DNSMON_CONTROLLER_URL + &quot;TimeController&quot;,


        /* connector */
        &quot;connector.facade&quot;: DNSMON_CONNECTOR_URL + &quot;ConnectorFacade&quot;,
        &quot;connector.aggregation-level&quot;: DNSMON_CONNECTOR_URL + &quot;AggregationLevelConnector&quot;,
        &quot;connector.anti-flood&quot;: DNSMON_CONNECTOR_URL + &quot;AntiFloodConnector&quot;,
        &quot;connector.filter&quot;: DNSMON_CONNECTOR_URL + &quot;FilterConnector&quot;,


        /* connector.atlas */
        &quot;connector.atlas.rest&quot;: DNSMON_CONNECTOR_URL + &quot;atlas/RestConnectorAtlas&quot;,
        &quot;connector.atlas.cache&quot;: DNSMON_CONNECTOR_URL + &quot;atlas/CacheConnectorAtlas&quot;,
        &quot;connector.atlas.error-handler&quot;: DNSMON_CONNECTOR_URL + &quot;atlas/ErrorsHandlerConnectorAtlas&quot;,
        &quot;connector.atlas.isolation-level&quot;: DNSMON_CONNECTOR_URL + &quot;atlas/IsolationLevelConnectorAtlas&quot;,


        /* session */
        &quot;session.facade&quot;: DNSMON_SESSION_URL + &quot;SessionManager&quot;
    },
    shim:{
        &quot;lib.jquery-ui&quot;: {
            deps: [&quot;lib.jquery&quot;]
        },

        &quot;lib.jquery.cookie&quot;: {
            deps: [&quot;lib.jquery&quot;]
        },

        &quot;lib.jquery-ui.timepicker&quot;: {
            deps: [&quot;lib.jquery-ui&quot;]
        }
    }
});



define([

    &quot;env.utils&quot;,
    &quot;env.config&quot;,
    &quot;env.languages.en&quot;,
    &quot;env.params-manager&quot;,
    &quot;view.main&quot;,
    &quot;connector.facade&quot;,
    &quot;session.facade&quot;,
    &quot;env.history-manager&quot;,
    &quot;lib.jquery&quot;,
    &quot;lib.jquery-ui&quot;

], function(
    utils,
    config,
    language,
    paramsManager,
    MainView,
    ConnectorFacade,
    SessionFacade,
    HistoryManager
    ){

    var DNSmon = function(instance){
        var env, internalParams, mergedParams, emptyParamVector, instanceParams, queryParams, parentDom, stylesLoaded,
            cssListenerInterval, cssListenerTimeout, cssListener;

        /*
         * Load required stylesheets
         */
        stylesLoaded = document.styleSheets.length;
        utils.loadCss(DNSMON_VIEW_URL + &quot;css/dnsmon_style.css&quot;);
        utils.loadCss(&quot;https://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css&quot;);

        /*
         * Access to the instance
         */
        instanceParams = instance.instanceParams;
        queryParams = instance.queryParams;
        parentDom = instance.domElement;

        // STUFF FOR THE DEMO
        window.grouping = utils.getUrlParam(&quot;grouping&quot;) == &quot;true&quot;;
        window.dynamicHeight = utils.getUrlParam(&quot;dheight&quot;) == &quot;true&quot;;

        /*
         * Convert params
         */
        if (queryParams){
            emptyParamVector = paramsManager.createInternalParamVector();
            internalParams = paramsManager.fromExternalToInternal(queryParams);
            mergedParams = paramsManager.mergeParams(emptyParamVector, internalParams);
        }

        /*
         * Init Dependency Injection Vector
         */
        env = {
            &quot;version&quot;: &quot;14.4.15.2&quot;,
            &quot;widgetUrl&quot;: DNSMON_WIDGET_URL,
            &quot;parentDom&quot;: parentDom, //HASH THIS
            &quot;document&quot;: utils.encapsulateDom($(document)),
            &quot;config&quot;: config,
            &quot;params&quot;: mergedParams,
            &quot;lang&quot;: language,
            &quot;maxHeight&quot;: ((instanceParams.hasOwnProperty(&quot;maxHeight&quot;)) ? instanceParams.maxHeight : Math.max($(document).height(), config.chartMaxHeight)),
            &quot;minHeight&quot;: ((instanceParams.hasOwnProperty(&quot;minHeight&quot;)) ? instanceParams.minHeight : config.chartMinHeight),
            &quot;callbacks&quot;: {
                change: ((instanceParams.hasOwnProperty(&quot;change&quot;)) ? [instanceParams.change] : []),
                load: ((instanceParams.hasOwnProperty(&quot;load&quot;)) ? [instanceParams.load] : [])
            },
            &quot;debugMode&quot;: ((instanceParams.hasOwnProperty(&quot;debugMode&quot;)) ? instanceParams.debugMode : (utils.getUrlParam(&#x27;debug_mode&#x27;) == &#x27;true&#x27;)),
            &quot;activeKeys&quot;: ((instanceParams.hasOwnProperty(&quot;activeKeys&quot;)) ? instanceParams.activeKeys : config.activeKeysByDefault),
            &quot;activeMouseZoom&quot;: ((instanceParams.hasOwnProperty(&quot;activeMouseZoom&quot;)) ? instanceParams.activeMouseZoom : config.activeMouseZoomByDefault),
            &quot;activeGestures&quot;: ((instanceParams.hasOwnProperty(&quot;activeGestures&quot;)) ? instanceParams.activeGestures : config.activeGesturesByDefault),
            &quot;localCacheActive&quot;: ((instanceParams.hasOwnProperty(&quot;localCacheActive&quot;)) ? instanceParams.localCacheActive : config.localCacheActiveByDefault),
            &quot;grouping&quot;: ((instanceParams.hasOwnProperty(&quot;grouping&quot;)) ? instanceParams.grouping : config.groupingByDefault),
            &quot;timeEventsActive&quot;: config.timeEventsActiveByDefault,
            &quot;isUpdatedPeriodicallyActive&quot;: ((instanceParams.hasOwnProperty(&quot;autoUpdate&quot;)) ? instanceParams.autoUpdate : config.autoUpdateActiveByDefault),
            &quot;fullScreenActive&quot;: ((instanceParams.hasOwnProperty(&quot;fullScreen&quot;)) ? instanceParams.fullScreen : config.fullScreenActiveByDefault)
        };


        /*
         * Initialize Point of Access to Packages
         */
        env.mainView = new MainView(env); //Representation Facade
        env.connector = new ConnectorFacade(env); //Connector Facade
        env.session = new SessionFacade(env); //Session Facade
        env.history = new HistoryManager(env); //History Manager


        /*
         * Check if stylesheets are loaded
         */
        cssListenerInterval = 50; //50 ms
        cssListenerTimeout = 10000; // 10 secs
        cssListener = setInterval(function(){

            if(document.styleSheets.length &gt;= stylesLoaded + 2){
                clearInterval(cssListener);
                env.mainView.init(parentDom, instanceParams);
            }else{
                if (cssListenerTimeout &lt;= 0){
                    clearInterval(cssListener);
                    console.log(&quot;It is not possible to load stylesheets.&quot;);
                }
                cssListenerTimeout -= cssListenerInterval;
            }
        }, cssListenerInterval);


        /**
         * A set of methods exposed outside
         */
        return {

            setParams: function(params){
                var newParams;

                newParams = paramsManager.fromExternalToInternal(params);
                env.params = paramsManager.mergeParams(env.params, newParams);
                env.mainView.redraw();
            },

            on: function(type, callback){
                if (!env.callbacks[type]){
                    env.callbacks[type] = [];
                }
                env.callbacks[type].push(callback);
            },

            off: function(type){
                env.callbacks[type] = [];
            },

            getParams: function(){
                return paramsManager.fromInternalToExternal(env.params);
            },

            getEnvironment: function(){
                return env;
            }

        };

    };

    return DNSmon;
});


    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
